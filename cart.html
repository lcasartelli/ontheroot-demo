<!DOCTYPE html><html><head><title>ontheroot :: welcome</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/pure-min.css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css"><link rel="stylesheet" href="static/css/style.css"><link rel="shortcut icon" href="static/img/favicon.png" type="image/png"></head><body><header><div class="header-inner"><div class="pull-left"><a href="index.html" class="header-button"><img src="static/img/otr-logo.png" class="logo"></a></div><div class="pull-right"><a onclick="document.getElementById(&quot;cart-dropdown&quot;).classList.toggle(&quot;show&quot;); this.classList.toggle(&quot;active&quot;);" class="header-button"><i class="fa fa-shopping-cart"><strong class="badge">5</strong></i><span>Carrello</span><div id="cart-dropdown"><div class="cart-item"><strong>McBacon</strong><span>1 porzione : € 10.00</span><button class="pure-button pure-danger"><span>Remove</span></button></div><div class="cart-item"><strong>Dakota</strong><span>2 porzioni : € 24.00</span><button class="pure-button pure-danger"><span>Remove</span></button></div><div class="cart-item"><button id="show-cart" data-href="cart.html" class="pure-button"><span>Go to cart</span></button></div></div></a><a href="profilo.html" class="header-button"><img src="http://api.adorable.io/avatars/285/abott@adorable.png"><span><strong>Abott Doe</strong><br><span>il tuo profilo</span></span></a><a class="pure-button pure-success"><span>Login</span></a></div></div></header><div class="page"><div class="spacer-100"></div></div><div class="page"><div class="container"><div class="spacer-40"></div><div class="text-center"><h1>Il tuo carrello</h1></div><div class="spacer-10"></div><hr><form id="checkout-order-form" class="pure-form shopping-form"><h2>Riepilogo ordine</h2><div class="spacer-20"></div><ul id="shopping-cart"><li class="header"><span class="item">Pietanza</span><span class="price">Prezzo</span><span class="quantity">Quantità</span></li><li><span class="item">McBacon</span><span class="price">&times;<span class="price-num">7,50</span>&euro;</span><span class="quantity"><input type="number" value="1" min="1" max="99"><span class="qty-plus"><i class="fa fa-plus"></i></span><span class="qty-minus"><i class="fa fa-minus"></i></span><span class="qty-remove"><i class="fa fa-times"></i></span></span></li><li><span class="item">Dakota</span><span class="price">&times;<span class="price-num">7,50</span>&euro;</span><span class="quantity"><input type="number" value="2" min="1" max="99"><span class="qty-plus"><i class="fa fa-plus"></i></span><span class="qty-minus"><i class="fa fa-minus"></i></span><span class="qty-remove"><i class="fa fa-times"></i></span></span></li></ul><div class="spacer-20"></div><div class="text-center"><span id="totalCart">0 &euro;</span></div><div class="spacer-20"></div><div class="text-center"><button type="submit" class="pure-button pure-success"><span>spedizione</span></button></div></form><div class="spacer-100"></div><div class="spacer-100"></div><form id="checkout-address-form" class="pure-form shopping-form disabled"><h2>Indirizzo di spedizione</h2><div class="spacer-20"></div><div class="text-center"><button type="submit" class="pure-button pure-success"><span>Pagamento</span></button></div></form><div class="spacer-100"></div><div class="spacer-100"></div><form id="checkout-payment-form" class="pure-form shopping-form disabled"><h2>Metodo di pagamento</h2><div class="spacer-20"></div><div class="text-center"><button type="submit" class="pure-button pure-success"><span>Conferma ordine</span></button></div></form><div class="spacer-100"></div></div></div><footer><div class="footer-inner"><div class="pull-left"><img src="static/img/otr-logo-footer.png" class="logo"></div><div class="pull-right"><p>&copy; 2015 <strong>ontheroot </strong>- Turnip greens yarrow ricebean rutabaga<a href="">hello@ontheroot.it</a><a href="">Privacy</a></p></div></div></footer><script type="text/javascript" src="static/js/main.js"></script><script>(function () {

  'use strict';




  //  -- check scrolling bar position --
  window.addEventListener('scroll', function () {
    var top = (document.documentElement && document.documentElement.scrollTop) || document.body.scrollTop;
    var paymentPxFromTop = document.getElementById('checkout-payment-form').offsetTop;
    var _totalCartEl = document.getElementById('totalCart');

    console.log(top, paymentPxFromTop);

    if (top <= /*paymentPxFromTop*/ 300) {
      _totalCartEl.classList.remove('fixed');
    } else {
      _totalCartEl.classList.add('fixed');
    }

  });




  function sumTotal() {
    var _rowsTotal = document.querySelectorAll('#shopping-cart li').map(function (row) {
      if (row.classList.contains('header')) {
        return 0;
      } else {
        return parseFloat(row.querySelector('span.price-num').textContent.replace(',', '.')) * parseInt((row.querySelector('input').value || 0), 10);
      }
    });
    var _sumTotal = _rowsTotal.reduce(function (prev, current) { return +(current) + prev }, 0);

    document.getElementById('totalCart').innerHTML = _sumTotal + '&euro;'; 
  }
  sumTotal();

  
  document.querySelector('.qty-plus').addEventListener('click', function () {
    var qtyInput = this.parentNode.querySelector('input');
    if (parseInt(qtyInput.value, 10) >= 10) { return; }
    qtyInput.value = parseInt(qtyInput.value, 10) + 1;
    sumTotal();
  });
  
  document.querySelector('.qty-minus').addEventListener('click', function () {
    var qtyInput = this.parentNode.querySelector('input');
    if (parseInt(qtyInput.value, 10) <= 1) { return; }
    qtyInput.value = parseInt(qtyInput.value, 10) - 1;
    sumTotal();
  });

  document.querySelector('.qty-remove').addEventListener('click', function () {
    var _el = this.parentNode.parentNode;
    var _confirm = confirm('Rimuovere il prodotto dal carrello?');

    if (_confirm) {
      _el.parentNode.removeChild(_el);
    }
    sumTotal();
  });


  //  -- step 1 --
  document.getElementById('checkout-order-form').addEventListener('submit', function (evt) {
    evt.preventDefault();

    var _that = this;

    if (_that.classList.contains('disabled')) {
      return;
    }

    sumTotal();

    _that.classList.add('disabled');
    document.getElementById('checkout-address-form').classList.remove('disabled');

    return false;
  });


  //  -- step 3 --
  document.getElementById('checkout-address-form').addEventListener('submit', function (evt) {
    evt.preventDefault();
    
    var _that = this;

    if (_that.classList.contains('disabled')) {
      return;
    }

    sumTotal();

    _that.classList.add('disabled');
    document.getElementById('checkout-payment-form').classList.remove('disabled');

    return false;
  });


  //  -- step 2 --
  document.getElementById('checkout-payment-form').addEventListener('submit', function (evt) {
    evt.preventDefault();
    alert('Ordine inviato! Grazie!');
    return false;
  });


})();</script></body></html>